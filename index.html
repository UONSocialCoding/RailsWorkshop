<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' />
  <title>Big</title>
  <link href='big.css' rel='stylesheet' type='text/css' />
  <link href='highlight.css' rel='stylesheet' type='text/css' />
  <style>
    .new-shiny { 
      background: #aaaaaa; 
    }
  </style>
  <script src='big.js'></script>
  <script src='highlight.js'></script>
  <script>hljs.initHighlightingOnLoad();</script>
</head>
<body class='dark'>
  <div><a href="https://uonsocialcoding.github.io/RailsWorkshop">uonsocialcoding.github.io/RailsWorkshop</a></div>

  <div>Welcome! ‚ù§Ô∏è</div>

  <div>
    In this workshop:
    <ul>
      <li>Why Rails?</li>
      <li>Some Ruby you probably haven't seen yet</li>
      <li><em>Writing production code</em></li>
    </ul>
  </div>

  <div>
    What makes Rails the best choice?
  </div>

  <div>
    1. <em>Ruby + Rails</em> = ‚ù§Ô∏è
  </div>

  <div data-background-image="./images/arnie.png"></div>

  <div>
    2. <em>Convention</em> over configuration
  </div>

  <div>
    3. Fantastic communities
  </div>

  <div data-background-image="./images/ruby-github.png"></div>

  <div data-background-image="./images/rails-github.png"></div>

  <div data-background-image="./images/rails-guides.png"></div>

  <div>
    Rails <em>isn't</em> perfect!
  </div>

  <div>
    Any questions? ü§î
  </div>

  <div>
    Enough Rails, let's talk <em>Rubyisms</em>
  </div>

  <div>
    Good
    <pre><em>'</em>Hello, Sean!<em>'</em></pre>
    <pre><em>"</em>Hello, <em>#{name}</em>!<em>"</em></pre>
  </div>

  <div>
    <pre>trees = <em>['chestnut', 'mahogany', 'pine']</em></pre>
  </div>

  <div>
    <pre>trees = <em>%w[chestnut mahogany pine]</em></pre>
  </div>

  <div>
    <pre>old_hash = <em>{ :apple => 'fruit', :banana => 'vegetable' }</em></pre>
  </div>

  <div>
    <pre>new_hash = <em>{ apple: 'fruit', banana: 'vegetable' }</em></pre>
  </div>

  <div>
    <pre class="flat"><em>[[:apple, 'fruit'], [:banana, 'vegetable']]</em>.to_h
=> { :apple => 'fruit', :banana => 'vegetable' }</pre>
  </div>

  <div>
    <em>Identical!</em>
    <ol>
      <li><pre>{ :a => 'b' }</pre></li>
      <li><pre><em>{ a: 'b' }</em></pre></li>
      <li><pre>[[:a, 'b']].to_h</pre></li>
    </ol>
  </div>

  <div>
    <pre class="flat">players = [...]
players.each <em>do |player|
  player.delete
end</em></pre>
  </div>

  <div>
    <pre>players.each <em>{ |player| player.delete }</em></pre>
  </div>

  <div>
    <pre>players.each<em>(&:delete)</em></pre>
  </div>

  <div>
    Remember that function calls in Ruby <em>do not have to have parentheses</em>
    <pre>players.each &:delete</pre>
  </div>

  <div>
    But you should <em>always use parentheses when chaining</em>
    <pre>Player.find_by(name: 'Sean').delete</pre>
  </div>

  <div>
    <ul>
      <li><code>if</code> and <code>unless</code></li>
      <li>Guard statements</li>
      <li>Bang and question mark methods</li>
      <li>Hashes as parameters</li>
      <li>Symbols</li>
      <li>DSLs</li>
      <li>Different kinds of loops</li>
    </ul>
  </div>

  <div>
    Some common Ruby pitfalls...
  </div>

  <div>
    Can you spot what's wrong?
    <pre class="flat">a = 0
loop do
  a++
  break if a == 10
end
=> <em>undefined method '+@'</em> for nil:NilClass (NoMethodError)</pre>
  </div>

  <div>
    <pre class="flat">a = 1
<em>a += 1</em>
puts a
=> 2</pre>
  </div>

  <div>
    Can you spot what's wrong?
    <pre class="flat">a = false
b = true
if a
  puts a
else if b
  puts b
end
=> <em>syntax error</em>, unexpected end-of-input</pre>
  </div>

  <div>
    <pre class="flat">a = false
b = true
if a
  puts a
<em>elsif</em> b
  puts b
end
=> true</pre>
  </div>

  <div>
    Why is the output unexpected?
    <pre class="flat">[0..2].each do |i|
  puts "i = #{i}"
end
=> "i = 0..2"</pre>
  </div>

  <div>
    <pre class="flat"><em>(0..2)</em>.each do |i|
  puts "i = #{i}"
end
=> "i = 0"
=> "i = 1"
=> "i = 2"</pre>
  </div>

  <div>
    Any questions? ü§î
  </div>

  <div>
    Writing <em>production</em> level code
  </div>

  <div>
    Production is <em>scary</em>!
  </div>

  <div>
    How can we mitigate the badness?
  </div>

  <div>
    Observe! <em>The 6 production commandments</em>
  </div>

  <div>
    1. <em>Write tests and run them</em> before committing
  </div>

  <div>
    <pre class="flat">test "username should be present" do
  blank_username = Player.new(username: '')
  <em>assert_not</em> blank_username.valid?
end</pre>
  </div>

  <div>
    2. <em>Use branches</em>, and keep their contents atomic
  </div>

  <div>
    <img src="./images/git-model.png" style="max-height: 100vh;margin: 0 auto;display: block;"/>
  </div>

  <div>
    3. <em>Run Rubocop</em> as much as possible
  </div>

  <div>
    4. <em>Don't fight the CI</em> (continuous integration)
  </div>

  <div data-background-image="./images/hound.png"></div>

  <div data-background-image="./images/codacy.jpeg"></div>

  <div>
    5. <em>Never</em> push changes directly to production
  </div>

  <div>
    6. <em>Review</em> pull requests
  </div>

  <div>
    In summary:
    <ol>
      <li>Write tests</li>
      <li>Use branches</li>
      <li>Run Rubocop</li>
      <li>Listen to CI</li>
      <li>Never push to production (directly)</li>
      <li>Peer reviews</li>
    </ol>
  </div>

  <div>
    Any closing questions? ü§î
  </div>

</body>
</html>
